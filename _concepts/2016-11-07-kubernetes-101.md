---
title: Kubernetes 101
author: Jamie Hannaford <jamie.hannaford@rackspace.com>
date: 2016-11-07
permalink: docs/concepts/kubernetes-101/
description: Introduction to Kubernetes, how Kubernetes is used with Carina, and instructions on how to install and use
kubernetes-versions:
  - 1.4.4
topics:
  - kubernetes
  - beginner
---

This tutorial explains the basic components of Kubernetes and provides a starting place for installing and using Kubernetes.

### What is Kubernetes?

Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications. It groups containers that make up an application into logical units for easy management and discovery.

It offers the following features:

* Container scheduling based on resource requirements
* Horizontal scaling
* Automated rollouts and rollbacks
* Storage orchestration
* Self-healing
* Service discovery and load balancing
* Secret and configuration management
* Batch execution

### How does Kubernetes work?

Kubernetes manages the orchestration of Docker containers in groupings called Pods. It relies on an API to perform all of its scheduling and resource management. When a client performs an operation, such as a create or get request, it communicates with an API service. All state for the cluster is saved in a key/value database. The scheduler is responsible for allocating resources to available node instances.

Kubernetes supports lots of different resource type operations, ranging from Pods to Secrets. More information about these resources can be found in our [Zero to Hero guide for Kubernetes]({{ site.baseurl }}/docs/tutorials/kubernetes-zero-to-hero).

### What makes up Kubernetes?

Kubernetes is distributed over two types of instances: Masters and Nodes. The former manages and schedules applications onto Nodes, which are responsible for hosting only. To perform their duties, each instance type is installed with different services. In this section you will be
introduced to each system component.

#### Master components

* `etcd` - a distributed key/value store that is used to persist the state of the cluster. It is made available to node instances as a
configuration store, allowing them to configure themselves according to the live state of the cluster, such as for service discovery.

* `kube-apiserver` - a REST API which handles client requests and persists state to the etcd store. It provides security features like  authentication, RBAC and TLS to ensure that cluster state is only modified securely.

* `kube-controller-manager` - a service which manages and enforces the state of all API resources. It watches etcd for resource changes and implements the procedure necessary for the state change, such as increasing the number of replicas in a ReplicaSet.

* `kube-scheduler` - a service which coordinates and schedules all units of work (such as Pods) to available nodes. To do so it understands the resource requirements for a potential scheduling job, analyzes the current cluster for availability - ensuring for example that nodes do not exceed hardware capacity, and selects an appropriate node.

####Â Node components

* `kubelet` - a service which starts, stops & manages Pods. It communicates with master components to receive work and perform actions on received manifests.

* `kube-proxy` - a proxy service which runs on each node which forwards packets to the correct containers and provides service-level load balancing for Pods.

### Cluster components

Once the Master and Node instances have been configured, we then install a
selection of Kubernetes pods in order to help you get started. These pods
include:

* `kube-dns` - a DNS server integrated with etcd to resolve service names into internal cluster IP addresses. This allows pods to refer to other pods through their service names.

These are installed under the `kube-system` namespace, and are visible when you
run this command:

```bash
kubectl --namespace=kube-system get pods
```

Many of these system components are installed as DaemonSet resources, which
are pods that run on every Node.

### Kubernetes and Carina

#### Resource concentration

In order to concentrate resources as much as possible, the first instance in
a cluster functions both as a Master and a Node by default. Each subsequent
instance that is added to the cluster serves as a Node only.

Future infrastructure configurations will allow for dedicated master instances.

#### Privileged containers

Running pod containers in privileged mode is disabled.

#### Configuration files

During the cluster creation process, Carina generates the following configuration
files for you to use in your local development environment. They are bundled
in a zip file:

- `kubectl.config`
- `kubectl.env`
- `kubectl.ps1`
- `kubectl.cmd`
- `kubectl.fish`

See [Create and Connect to a Cluster](docs/getting-started/create-connect-cluster/)
for step-by-step instructions for downloading and using the configuration files.

#### TLS configuration

When a kubernetes cluster is provisioned, the following TLS certificates are
generated on the master:

- `ca.pem` and `ca-cert.pem`
- `apiserver.pem` and `apiserver-key.pem`
- `admin.pem` and `admin-key.pem`
- `node.pem` and `node-key.pem`
- `user.pem` and `user-key.pem`

These enable the inter-cluster communication to operate securely over TLS.
The [configuration files](#configuration-files) use these certificates to
configure `kubectl` to connect to a cluster.

#### Port ranges for NodePort services

By default Kubernetes only allows `NodePort` services to operate on the port
range 30000-32767. Carina, however, allows your Kubernetes services to use all
ports. This allows you to set up a web application and use ports 80 and 443
on the host, instead of having to use a high port number like 30000.

#### SSH access

SSH access is disabled for hosts in a Kubernetes cluster.

### Next steps

To create a Kubernetes cluster:

* [Create a Kubernetes cluster with the Carina CLI]({{ site.baseurl }}/docs/getting-started/create-kubernetes-cluster-with-cli/)
* [Create a Kubernetes cluster with the Carina UI]({{ site.baseurl }}/docs/getting-started/create-kubernetes-cluster/)
